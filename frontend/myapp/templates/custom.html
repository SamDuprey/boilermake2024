{% extends "base.html" %}

{% block title %}Create Page{% endblock %}
{% block homeActive %}"nav-item"{% endblock %}
{% block createActive %}"nav-item active"{% endblock %}


{% block content %}
<br />
<p class="createDescription center">Create your custom video here! Enter your text in the input box below, select the type of video you want, and then hit generate!</p>
<br />

<!-- Custom Input -->
<div class="center customBox" id="customInput">
    <label class="dropdownLabel" for="dropdown2">Text:</label>
    <input class="customText dropdown" id="dropdown1" name="dropdown1" placeholder="Insert video text here...">
</div>
<br />

<div class="center">
  <label class="dropdownLabel" for="dropdown2">Video:</label>
  <select class="dropdown" id="dropdown2" name="dropdown2"> 
    <option value="Subway Surfers">Subway Surfers</option>
    <option value="Generated Images">General Videos</option>
    <option value="Minecraft Parkour">Minecraft Parkour</option>
  </select>
</div>
<br />


<div class="container hover">
  <a href="#" class="button generateBtn" onclick="submitFormAndShowLoadingCircle()">Generate</a>
</div> 

<div id="loading-circle" style="display: none">
  <div class="spinner-border text-primary" role="status">
    <span class="sr-only">Loading...</span>
  </div>
</div>
<div id="loading-text" style="display: none">
  Loading...
</div>

<div class="center">
  <video class="center video" width="480" height="360" controls class="video">
    <source src="../static/videos/video.mp4" type="video/mp4">
  </video>
</div>

<script>
    function submitFormAndShowLoadingCircle() {
      // Get selected values from dropdowns
      var dropdown1Value = document.getElementById("dropdown1").value;
      var dropdown2Value = document.getElementById("dropdown2").value;
  
      // Show the loading circle
      document.getElementById("loading-circle").style.display = "block";
  
      // Make an AJAX request to execute_dummy endpoint with parameters
      fetch(`/execute_dummy/?dropdown1=${dropdown1Value}&dropdown2=${dropdown2Value}`)
        .then(function(response) {
          return response.json();
        })
        .then(function(data) {
          // Handle the response data
          console.log('Result:', data.result);
          document.getElementById("loading-text").innerText = data.result;
          document.getElementById("loading-text").style.display = "block";
          document.getElementById("loading-circle").style.display = "none";
          // You can update the page or handle the result as needed
        })
        .catch(function(error) {
          console.error('Error:', error);
          document.getElementById("loading-text").innerText = "Error";
          document.getElementById("loading-text").style.display = "block";
          document.getElementById("loading-circle").style.display = "none";
        });
  
      // Submit the form
      //document.querySelector("form").submit();
    }
  </script>


{% endblock %}